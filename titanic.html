<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>

    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <!-- CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <link rel="stylesheet" href="css/style.css">


    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>

    <script src="https://d3js.org/d3.v5.js"
			integrity="sha384-qbNa7U27VV0Cghe/43y8zEMkmA5M4VxV6MI0k0vdVJKTrBoT2SnBqwccpD0vX+Is"
			crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>

    <!--*******************************************-->
    <!--***** IMPORT EXTERNAL JAVASCRIPT CODE *****-->
    <script src="https://d3js.org/d3-array.v2.min.js"></script>
    <script src="js/sample_visualization.js"></script>
    <script src="js/barChart.js"></script>
    <script src="js/scatter.js"></script>
    <script src="js/pieChart.js"></script>
    <!--*******************************************-->


    <title>CAP 4744/5745 - Interactive Data Visualization - Project 3</title>

</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="index.html">Project 3: Ayman Nagi</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="calvin.html">Calvin College 2004</a></li>
            <li class="nav-item"><a class="nav-link" href="iris.html">Iris Dataset</a></li>
            <li class="nav-item active"><a class="nav-link" href="titanic.html">Titanic Passenger List</a></li>
            <li class="nav-item"><a class="nav-link" href="wb_st.html">World Bank Data, Science-and-Technology</a></li>
        </ul>
    </div>
</nav>

<div class="page">

    <h1>CAP 4744/5745 - Interactive Data Visualization</h1>
    <h2>Project 3: Titanic Passenger List Dataset</h2>
    <h2>Ayman Nagi</h2>

    <h3>Visualization 1: Univariate</h3>
    <div><svg id="vis_1" name="vis_1" class="default_svg"></svg></div>
    <div>
        <p>This visualization's goal is to show the audience what people paid in 1912 for a ticket to board the largest cruise ship in the world, the Titanic. </p>
        <p>When looking at this bar chart, one could get an idea of the average price a passenger paid to set sail and would notice how very few people paid very high prices.
        Since I wanted to plot each passenger's ticket price and there were 1308 total passengers, the bars needed to be very slim and have very little padding in-between them. 
        As a result I decided to sort the data by ascending ticket fare before binding each rectangle to make it easier for a viewer to see the price of ticket.</p>
    </div>

    <h3>Visualization 2: Bivariate</h3>
    <div><svg id="vis_2" name="vis_2" class="default_svg"></svg></div>
    <div>
        <p>This visualization aims to show if there can be any correlation found between age and fare price paid.</p>
        <p>After creating the first visualization above, I wondered if age had any role in determining a passenger's fare price.
         When I first plotted all of the points, it was hard to pick certain points apart from each other since a lot of them are laid over another. 
         As a result I decided to also track Male and Female passengers to help discern one point from another by allowing some to be different colors. </p>
    </div>

    <h3>Visualization 3: Aggregation</h3>
    <div><svg id="vis_3" name="vis_3" class="default_svg"></svg></div>
    <div>
        <p>This visualization portrays the Titanic's total population and makes it easy to see the ratio of people who survived and did not survive as well as the ratio of men who survived versus women who survived.</p>
        <p>This pie chart is based off the total Titanic population (1308 people) and breaks down (by color) both males and females who survived or did not survive. We can see a few things: The first being the majority of those who died were male. 
        We can also see that out of all the women, a majority survived. Lastly we can see the ratio male to female passengers aboard the ship.</p>
    </div>

</div>


<script>

    /*************************************************/
    /* CODE FOR LOADING AND VISUALIZING DATA */

    let data = null;
    let vis_1 = null;
    let vis_2 = null;
    let vis_3 = null;
    let vis_4 = null;
    
    let xAxis = "";
    let yAxis = "";
    
    // For sorting x-axis variables
    function compare(a,b){ 
        if (a["Fare"] > b["Fare"]){ 
            return 1;
        }
        else{ 
            return -1;
        }
    }

    // Returns map of only needed data for pieChart function to easier parse data
    function getPieData(data){
        let map = {"Male Survived": 0, "Female Survived": 0, "Male Died": 0, "Female Died": 0}
        
        for(const index of data){
            if(index.Survived === "Yes"){
                if(index.Sex == "male"){
                    map["Male Survived"] += 1
                } else{
                    map["Female Survived"] += 1
                }
            }
            else{
                if(index.Sex == "male"){
                    map["Male Died"] += 1
                } else{
                    map["Female Died"] += 1
                }
            }
        }
        //console.log(map)
        return map
    }


    d3.csv("data/titanic_passenger_list.csv", (row, i) => {
        return {
            Name: row.name,
            Survived: (row.survived==1) ? "Yes": "No",
            Sex: row.sex,
            Age: +row.age,
            Fare: +row.fare,
        };
    }).then(rows => {
        xAxis = "Fare"        
        rows.sort(compare);
        
        data = rows;
        vis_1 = titanicBarChart("#vis_1",data, xAxis)

        xAxis = "Age"
        yAxis = "Fare" 
        vis_2 = scatterPlot("#vis_2", data, xAxis, yAxis)

        let pie = getPieData(rows);
        vis_3 = pieChart("#vis_3", pie)
    
    }).catch(error => {
        console.log(error);
    });

    /*************************************************/

</script>

</body>
</html>
